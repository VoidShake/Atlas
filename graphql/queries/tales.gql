fragment Summary on AbstractTale {
   id
   title
   ... on Tale {
      locations {
         totalCount
      }
   }
   ... on TaleDraft {
      locations {
         totalCount
      }
   }
}

fragment Lore on AbstractTale {
   ...Summary
   text
   ... on Tale {
      locations {
         nodes {
            ...MapLocation
         }
      }
   }
   ... on TaleDraft {
      locations {
         nodes {
            ...MapLocation
         }
      }
   }
}

query getTales($pagination: Pagination) {
   connection: tales(pagination: $pagination) {
      totalCount
      nodes {
         ...Summary
      }
      pageInfo {
         ...PageInfo
      }
   }
}

query getTale($id: Int!) {
   tale(id: $id) {
      ...Lore
   }
}

mutation createTale($input: CreateTaleInput!, $locations: [Int!]) {
   created: createTale(input: $input, locations: $locations)
}
